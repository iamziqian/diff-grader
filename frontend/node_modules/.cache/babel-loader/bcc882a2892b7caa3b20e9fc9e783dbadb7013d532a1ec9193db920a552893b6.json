{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Alert,Row,Col,Spinner,Card}from'react-bootstrap';import'bootstrap/dist/css/bootstrap.min.css';import'./App.css';import Header from'./components/Header';import FileUpload from'./components/FileUpload';import CodeComparison from'./components/CodeComparison';import FeedbackPanel from'./components/FeedbackPanel';import apiService from'./services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const App=()=>{var _state$comparison,_state$selectedElemen;const[state,setState]=useState({session:null,comparison:null,selectedElement:null,selectedMatch:null,feedbacks:[],loading:false,error:null,step:'upload'});// Auto-refresh comparison status\nuseEffect(()=>{if(state.session&&state.session.status==='analyzing'){const interval=setInterval(async()=>{try{const response=await apiService.getGradingSession(state.session.id);if(response.success){const updatedSession=response.data;setState(prev=>({...prev,session:updatedSession}));if(updatedSession.status==='ready'){clearInterval(interval);await loadComparison(updatedSession.id);}}}catch(error){console.error('Failed to check session status:',error);}},2000);return()=>clearInterval(interval);}},[state.session]);const handleError=error=>{setState(prev=>({...prev,error,loading:false}));};const clearError=()=>{setState(prev=>({...prev,error:null}));};const handleFileUploaded=async uploadedFiles=>{setState(prev=>({...prev,loading:true,error:null}));try{const response=await apiService.createGradingSession(uploadedFiles.student.id,uploadedFiles.reference.id);if(response.success){setState(prev=>({...prev,session:response.data,loading:false,step:'analyzing'}));}else{throw new Error(response.error||'Failed to create grading session');}}catch(error){handleError(`Failed to create grading session: ${error instanceof Error?error.message:'Unknown error'}`);}};const loadComparison=async sessionId=>{setState(prev=>({...prev,loading:true}));try{const[comparisonResponse,feedbacksResponse]=await Promise.all([apiService.getComparison(sessionId),apiService.getFeedbacks(sessionId)]);if(comparisonResponse.success){setState(prev=>({...prev,comparison:comparisonResponse.data,feedbacks:feedbacksResponse.success?feedbacksResponse.data:[],loading:false,step:'comparison'}));}else{throw new Error(comparisonResponse.error||'Failed to load comparison');}}catch(error){handleError(`Failed to load comparison: ${error instanceof Error?error.message:'Unknown error'}`);}};const handleElementSelect=(element,match)=>{setState(prev=>({...prev,selectedElement:element,selectedMatch:match||null}));};const handleFeedbackSaved=feedback=>{setState(prev=>({...prev,feedbacks:[...prev.feedbacks.filter(f=>f.id!==feedback.id),feedback]}));};const handleReset=()=>{setState({session:null,comparison:null,selectedElement:null,selectedMatch:null,feedbacks:[],loading:false,error:null,step:'upload'});};// Multi-file upload handler\nconst[uploadedFiles,setUploadedFiles]=useState({});const handleSingleFileUploaded=(file,type)=>{const newUploadedFiles={...uploadedFiles,[type]:file};setUploadedFiles(newUploadedFiles);// If both files are uploaded, create session\nif(newUploadedFiles.student&&newUploadedFiles.reference){handleFileUploaded(newUploadedFiles);}};const renderStepIndicator=()=>{const steps=[{key:'upload',label:'Upload Files',icon:'fas fa-upload'},{key:'analyzing',label:'Analyzing Code',icon:'fas fa-cog fa-spin'},{key:'comparison',label:'View Comparison',icon:'fas fa-balance-scale'},{key:'completed',label:'Completed',icon:'fas fa-check-circle'}];return/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:steps.map((step,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`d-flex align-items-center ${index>0?'ms-4':''} ${state.step===step.key?'text-primary fw-bold':steps.findIndex(s=>s.key===state.step)>index?'text-success':'text-muted'}`,children:[/*#__PURE__*/_jsx(\"i\",{className:`${step.icon} me-2`}),/*#__PURE__*/_jsx(\"span\",{children:step.label}),index<steps.length-1&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right ms-4 text-muted\"})]},step.key))})})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{overallSimilarity:(_state$comparison=state.comparison)===null||_state$comparison===void 0?void 0:_state$comparison.overallSimilarity}),/*#__PURE__*/_jsxs(Container,{children:[renderStepIndicator(),state.error&&/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",dismissible:true,onClose:clearError,className:\"mb-4\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Error\"}),state.error]}),state.loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Processing...\"})]}),state.step==='upload'&&/*#__PURE__*/_jsx(FileUpload,{onFileUploaded:handleSingleFileUploaded,onError:handleError}),state.step==='analyzing'&&state.session&&/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\",style:{width:'3rem',height:'3rem'}}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3\",children:\"Analyzing Code Structure\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Please wait while we extract and compare code elements...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Student File:\"}),\" \",state.session.studentFile.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Reference File:\"}),\" \",state.session.referenceFile.name]})})]})}),state.step==='comparison'&&state.comparison&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(CodeComparison,{comparison:state.comparison,onElementSelect:handleElementSelect,selectedElementId:(_state$selectedElemen=state.selectedElement)===null||_state$selectedElemen===void 0?void 0:_state$selectedElemen.id})})}),/*#__PURE__*/_jsx(Row,{className:\"mt-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(FeedbackPanel,{sessionId:state.session.id,selectedElement:state.selectedElement||undefined,selectedMatch:state.selectedMatch||undefined,onFeedbackSaved:handleFeedbackSaved,onError:handleError})})}),/*#__PURE__*/_jsx(Row,{className:\"mt-4\",children:/*#__PURE__*/_jsxs(Col,{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary me-3\",onClick:handleReset,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-redo me-2\"}),\"Start New Analysis\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success\",onClick:()=>setState(prev=>({...prev,step:'completed'})),disabled:state.feedbacks.length===0,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check me-2\"}),\"Complete Grading\"]})]})})]}),state.step==='completed'&&/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle fa-4x text-success mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Grading Completed!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-4\",children:\"You have successfully completed the grading process.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Summary:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled mt-2\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Total Feedback Items: \",state.feedbacks.length]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Overall Similarity: \",state.comparison?Math.round(state.comparison.overallSimilarity*100):0,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleReset,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-2\"}),\"Start New Grading Session\"]})]})})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Container","Alert","Row","Col","Spinner","Card","Header","FileUpload","CodeComparison","FeedbackPanel","apiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_state$comparison","_state$selectedElemen","state","setState","session","comparison","selectedElement","selectedMatch","feedbacks","loading","error","step","status","interval","setInterval","response","getGradingSession","id","success","updatedSession","data","prev","clearInterval","loadComparison","console","handleError","clearError","handleFileUploaded","uploadedFiles","createGradingSession","student","reference","Error","message","sessionId","comparisonResponse","feedbacksResponse","Promise","all","getComparison","getFeedbacks","handleElementSelect","element","match","handleFeedbackSaved","feedback","filter","f","handleReset","setUploadedFiles","handleSingleFileUploaded","file","type","newUploadedFiles","renderStepIndicator","steps","key","label","icon","className","children","Body","map","index","findIndex","s","length","overallSimilarity","variant","dismissible","onClose","Heading","animation","onFileUploaded","onError","style","width","height","studentFile","name","referenceFile","onElementSelect","selectedElementId","undefined","onFeedbackSaved","onClick","disabled","Math","round"],"sources":["/Users/ziqianfu/diff-grader/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Alert, Row, Col, Spinner, Card } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nimport Header from './components/Header';\nimport FileUpload from './components/FileUpload';\nimport CodeComparison from './components/CodeComparison';\nimport FeedbackPanel from './components/FeedbackPanel';\nimport { \n  GradingSession, \n  UploadedFile, \n  ComparisonResult, \n  CodeElement, \n  ComparisonMatch, \n  Feedback \n} from './types';\nimport apiService from './services/api';\n\ninterface AppState {\n  session: GradingSession | null;\n  comparison: ComparisonResult | null;\n  selectedElement: CodeElement | null;\n  selectedMatch: ComparisonMatch | null;\n  feedbacks: Feedback[];\n  loading: boolean;\n  error: string | null;\n  step: 'upload' | 'analyzing' | 'comparison' | 'completed';\n}\n\nconst App: React.FC = () => {\n  const [state, setState] = useState<AppState>({\n    session: null,\n    comparison: null,\n    selectedElement: null,\n    selectedMatch: null,\n    feedbacks: [],\n    loading: false,\n    error: null,\n    step: 'upload',\n  });\n\n  // Auto-refresh comparison status\n  useEffect(() => {\n    if (state.session && state.session.status === 'analyzing') {\n      const interval = setInterval(async () => {\n        try {\n          const response = await apiService.getGradingSession(state.session!.id);\n          if (response.success) {\n            const updatedSession = response.data;\n            setState(prev => ({ ...prev, session: updatedSession }));\n\n            if (updatedSession.status === 'ready') {\n              clearInterval(interval);\n              await loadComparison(updatedSession.id);\n            }\n          }\n        } catch (error) {\n          console.error('Failed to check session status:', error);\n        }\n      }, 2000);\n\n      return () => clearInterval(interval);\n    }\n  }, [state.session]);\n\n  const handleError = (error: string) => {\n    setState(prev => ({ ...prev, error, loading: false }));\n  };\n\n  const clearError = () => {\n    setState(prev => ({ ...prev, error: null }));\n  };\n\n  const handleFileUploaded = async (uploadedFiles: { student: UploadedFile; reference: UploadedFile }) => {\n    setState(prev => ({ ...prev, loading: true, error: null }));\n\n    try {\n      const response = await apiService.createGradingSession(\n        uploadedFiles.student.id,\n        uploadedFiles.reference.id\n      );\n\n      if (response.success) {\n        setState(prev => ({\n          ...prev,\n          session: response.data,\n          loading: false,\n          step: 'analyzing',\n        }));\n      } else {\n        throw new Error(response.error || 'Failed to create grading session');\n      }\n    } catch (error) {\n      handleError(`Failed to create grading session: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  };\n\n  const loadComparison = async (sessionId: string) => {\n    setState(prev => ({ ...prev, loading: true }));\n\n    try {\n      const [comparisonResponse, feedbacksResponse] = await Promise.all([\n        apiService.getComparison(sessionId),\n        apiService.getFeedbacks(sessionId),\n      ]);\n\n      if (comparisonResponse.success) {\n        setState(prev => ({\n          ...prev,\n          comparison: comparisonResponse.data,\n          feedbacks: feedbacksResponse.success ? feedbacksResponse.data : [],\n          loading: false,\n          step: 'comparison',\n        }));\n      } else {\n        throw new Error(comparisonResponse.error || 'Failed to load comparison');\n      }\n    } catch (error) {\n      handleError(`Failed to load comparison: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  };\n\n  const handleElementSelect = (element: CodeElement, match?: ComparisonMatch) => {\n    setState(prev => ({\n      ...prev,\n      selectedElement: element,\n      selectedMatch: match || null,\n    }));\n  };\n\n  const handleFeedbackSaved = (feedback: Feedback) => {\n    setState(prev => ({\n      ...prev,\n      feedbacks: [\n        ...prev.feedbacks.filter(f => f.id !== feedback.id),\n        feedback,\n      ],\n    }));\n  };\n\n  const handleReset = () => {\n    setState({\n      session: null,\n      comparison: null,\n      selectedElement: null,\n      selectedMatch: null,\n      feedbacks: [],\n      loading: false,\n      error: null,\n      step: 'upload',\n    });\n  };\n\n  // Multi-file upload handler\n  const [uploadedFiles, setUploadedFiles] = useState<{\n    student?: UploadedFile;\n    reference?: UploadedFile;\n  }>({});\n\n  const handleSingleFileUploaded = (file: UploadedFile, type: 'student' | 'reference') => {\n    const newUploadedFiles = { ...uploadedFiles, [type]: file };\n    setUploadedFiles(newUploadedFiles);\n\n    // If both files are uploaded, create session\n    if (newUploadedFiles.student && newUploadedFiles.reference) {\n      handleFileUploaded(newUploadedFiles as { student: UploadedFile; reference: UploadedFile });\n    }\n  };\n\n  const renderStepIndicator = () => {\n    const steps = [\n      { key: 'upload', label: 'Upload Files', icon: 'fas fa-upload' },\n      { key: 'analyzing', label: 'Analyzing Code', icon: 'fas fa-cog fa-spin' },\n      { key: 'comparison', label: 'View Comparison', icon: 'fas fa-balance-scale' },\n      { key: 'completed', label: 'Completed', icon: 'fas fa-check-circle' },\n    ];\n\n    return (\n      <Card className=\"mb-4\">\n        <Card.Body>\n          <div className=\"d-flex justify-content-center\">\n            {steps.map((step, index) => (\n              <div\n                key={step.key}\n                className={`d-flex align-items-center ${\n                  index > 0 ? 'ms-4' : ''\n                } ${\n                  state.step === step.key ? 'text-primary fw-bold' : \n                  steps.findIndex(s => s.key === state.step) > index ? 'text-success' : 'text-muted'\n                }`}\n              >\n                <i className={`${step.icon} me-2`}></i>\n                <span>{step.label}</span>\n                {index < steps.length - 1 && (\n                  <i className=\"fas fa-chevron-right ms-4 text-muted\"></i>\n                )}\n              </div>\n            ))}\n          </div>\n        </Card.Body>\n      </Card>\n    );\n  };\n\n  return (\n    <div className=\"App\">\n      <Header overallSimilarity={state.comparison?.overallSimilarity} />\n      \n      <Container>\n        {renderStepIndicator()}\n\n        {state.error && (\n          <Alert variant=\"danger\" dismissible onClose={clearError} className=\"mb-4\">\n            <Alert.Heading>Error</Alert.Heading>\n            {state.error}\n          </Alert>\n        )}\n\n        {state.loading && (\n          <div className=\"text-center mb-4\">\n            <Spinner animation=\"border\" variant=\"primary\" />\n            <p className=\"mt-2\">Processing...</p>\n          </div>\n        )}\n\n        {state.step === 'upload' && (\n          <FileUpload\n            onFileUploaded={handleSingleFileUploaded}\n            onError={handleError}\n          />\n        )}\n\n                 {state.step === 'analyzing' && state.session && (\n           <Card>\n             <Card.Body className=\"text-center py-5\">\n               <Spinner animation=\"border\" variant=\"primary\" style={{ width: '3rem', height: '3rem' }} />\n               <h4 className=\"mt-3\">Analyzing Code Structure</h4>\n               <p className=\"text-muted\">\n                 Please wait while we extract and compare code elements...\n               </p>\n               <div className=\"mt-4\">\n                 <small className=\"text-muted\">\n                   <strong>Student File:</strong> {state.session.studentFile.name}<br />\n                   <strong>Reference File:</strong> {state.session.referenceFile.name}\n                 </small>\n               </div>\n             </Card.Body>\n           </Card>\n         )}\n\n        {state.step === 'comparison' && state.comparison && (\n          <>\n            <Row>\n              <Col>\n                <CodeComparison\n                  comparison={state.comparison}\n                  onElementSelect={handleElementSelect}\n                  selectedElementId={state.selectedElement?.id}\n                />\n              </Col>\n            </Row>\n\n            <Row className=\"mt-4\">\n              <Col>\n                                 <FeedbackPanel\n                   sessionId={state.session!.id}\n                   selectedElement={state.selectedElement || undefined}\n                   selectedMatch={state.selectedMatch || undefined}\n                   onFeedbackSaved={handleFeedbackSaved}\n                   onError={handleError}\n                 />\n              </Col>\n            </Row>\n\n            <Row className=\"mt-4\">\n              <Col className=\"text-center\">\n                <button \n                  className=\"btn btn-outline-secondary me-3\"\n                  onClick={handleReset}\n                >\n                  <i className=\"fas fa-redo me-2\"></i>\n                  Start New Analysis\n                </button>\n                <button \n                  className=\"btn btn-success\"\n                  onClick={() => setState(prev => ({ ...prev, step: 'completed' }))}\n                  disabled={state.feedbacks.length === 0}\n                >\n                  <i className=\"fas fa-check me-2\"></i>\n                  Complete Grading\n                </button>\n              </Col>\n            </Row>\n          </>\n        )}\n\n        {state.step === 'completed' && (\n          <Card>\n            <Card.Body className=\"text-center py-5\">\n              <i className=\"fas fa-check-circle fa-4x text-success mb-4\"></i>\n              <h3>Grading Completed!</h3>\n              <p className=\"text-muted mb-4\">\n                You have successfully completed the grading process.\n              </p>\n              <div className=\"mb-4\">\n                <strong>Summary:</strong>\n                <ul className=\"list-unstyled mt-2\">\n                  <li>Total Feedback Items: {state.feedbacks.length}</li>\n                  <li>Overall Similarity: {state.comparison ? Math.round(state.comparison.overallSimilarity * 100) : 0}%</li>\n                </ul>\n              </div>\n              <button \n                className=\"btn btn-primary\"\n                onClick={handleReset}\n              >\n                <i className=\"fas fa-plus me-2\"></i>\n                Start New Grading Session\n              </button>\n            </Card.Body>\n          </Card>\n        )}\n      </Container>\n    </div>\n  );\n};\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}